# log4j

> Mybaits官网传送门：[settings（设置）](https://mybatis.org/mybatis-3/zh/configuration.html#settings)

## 一、什么是Log4j？

> Log4j是Apache的一个开源项目，通过使用Log4j，我们可以控制日志信息输送的目的地是控制台、文件、GUI组件；
> 可以控制每一条日志的输出格式；
> 通过定义每一条日志信息的级别，我们能够更加细致地控制日志的生成过程；
> 通过一个配置文件来灵活地进行配置，不需要修改应用的代码。

## 二、配置log4j文件

1. 在`pom.xml`中导入log4j的包。
> 传送门：[Maven官网导log4j](https://mvnrepository.com/artifact/log4j/log4j)

```xml
<!-- https://mvnrepository.com/artifact/log4j/log4j -->
<dependency>
    <groupId>log4j</groupId>
    <artifactId>log4j</artifactId>
    <version>1.2.17</version>
</dependency>
```

2. 添加`log4j.properties`配置文件。
```properties
#将等级为DEBUG的日志信息输出的位置，console为输出到控制台，file为输出到文件,console和file的定义在下面的代码
log4j.rootLogger=DEBUG,console,file

#控制台输出的相关设置
log4j.appender.console = org.apache.log4j.ConsoleAppender
log4j.appender.console.Target = System.out
log4j.appender.console.Threshold=DEBUG
log4j.appender.console.layout = org.apache.log4j.PatternLayout
log4j.appender.console.layout.ConversionPattern=[%c]-%m%n

#文件输出的相关设置
log4j.appender.file = org.apache.log4j.RollingFileAppender
log4j.appender.file.File=./log/shun.log
log4j.appender.file.MaxFileSize=10mb
log4j.appender.file.Threshold=DEBUG
log4j.appender.file.layout=org.apache.log4j.PatternLayout
log4j.appender.file.layout.ConversionPattern=[%p][%d{yy-MM-dd}][%c]%m%n

#日志输出级别
log4j.logger.org.mybatis=DEBUG
log4j.logger.java.sql=DEBUG
log4j.logger.java.sql.Statement=DEBUG
log4j.logger.java.sql.ResultSet=DEBUG
log4j.logger.java.sql.PreparedStatement=DEBUG
```

3. 在核心配置文件`Mybatis-config.xml`配置log4j为日志的实现。
```xml
<settings>
    <setting name="logImpl" value="LOG4J"/>
</settings>
```

## 三、log4j简单测试使用

1. 在要使用Log4j的类中，导入包`import org.apache.log4j.Logger;`，注意：包不能导错，要导Apache的。
1. 日志对象，参数为当前类的class：
```java
static Logger logger = Logger.getLogger(UserMapperTest.class);
```

3. 日志级别。
```java
 @Test
    public void testLog4j(){

        logger.info("info:进入了testLog4j方法");
        logger.debug("debug:进入了testLog4j方法");
        logger.error("error:进入了testLog4j方法");

    }
```

4. 运行后会自动生成log日志文件，相当于在程序中加入`System.out.println(info)`一样，在log日志文件可以清晰的看到日志信息。

<img src="https://gitee.com/xleixz/CloudNotes-Images/raw/master/Typora-Images/20220424134652.png" alt="img" style="zoom:33%;" />

## 四、IDEA无法打开log文件的处理方法

 IDEA有的时候无法打开一些后缀的文件，可以在File-settings-Editor-File Types中添加想要打开的文件类型。 
<img src="https://gitee.com/xleixz/CloudNotes-Images/raw/master/Typora-Images/20220424134704.png" alt="img" style="zoom: 50%;" />



再次回到IDEA打开log文件， 此时IDEA会弹出如下提示，也就是安装log文件的插件，点击**Install plugins**安装插件之后，也就可以正常查看文件了。  ![img](https://gitee.com/xleixz/CloudNotes-Images/raw/master/Typora-Images/20220424134718.png)

